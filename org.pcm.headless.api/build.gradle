plugins {
    id 'java'
}

repositories {
    jcenter()
}

archivesBaseName = 'headless-pcm-api'
version = '0.6.3'

configurations {
    slim
    notIncludedSlim
    compile.extendsFrom slim
}

dependencies {
	slim project(":org.pcm.headless.shared")
	
	// https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind
	notIncludedSlim group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.10.0'
	
	// https://mvnrepository.com/artifact/com.google.guava/guava
	notIncludedSlim group: 'com.google.guava', name: 'guava-collections', version: 'r03'
	
	// https://mvnrepository.com/artifact/com.squareup.okhttp3/okhttp
	slim group: 'com.squareup.okhttp3', name: 'okhttp', version: '4.2.2'
	
	compile group: 'org.jscience', name: 'jscience', version: '4.3.1'
	compile group: 'lpg.runtime', name: 'java', version: '2.0.17-v201004271640'
	
	compile 'extra:org.eclipse.equinox.common:3.10.500.v20190815-1535'
	compile 'org.antlr:antlr-runtime:3.5.2' 
	
	compile 'extra:org.eclipse.ocl.ecore:3.14.0.v20190910-0937'
    compile 'extra:org.eclipse.ocl:3.10.400.v20190910-0937'
	
	compile 'extra:org.palladiosimulator.pcm:4.1.0.201910030052'
	compile 'extra:org.palladiosimulator.monitorrepository:3.0.1.201910030104'
	compile 'extra:org.palladiosimulator.edp2:2.0.0.201910030048'
	compile 'extra:org.palladiosimulator.pcm.edp2.measuringpoint:1.0.0.201910030052'
	compile 'extra:org.palladiosimulator.edp2.dao:1.0.0.201910030048'
	compile 'extra:org.palladiosimulator.commons:1.0.1.201910030029'
	
	compile 'extra:de.uka.ipd.sdq.identifier:2.1.0.201910030029'
	compile 'extra:de.uka.ipd.sdq.stoex:2.2.0.201910030029'
	compile 'extra:de.uka.ipd.sdq.units:2.1.1.201910030029'
	compile 'extra:de.uka.ipd.sdq.probfunction:2.1.1.201910030029'
	compile 'extra:org.palladiosimulator.metricspec:1.0.3.201910030036'
	
	compile 'extra:org.eclipse.net4j.util:3.8.0.v20180530-0909'
    compile 'extra:org.eclipse.net4j:4.7.0.v20180530-1201'
    
    compile 'extra:org.eclipse.emf.cdo.common:4.7.0.v20180529-1130'
    compile 'extra:org.eclipse.emf.cdo:4.6.100.v20180529-1130'
    compile 'extra:org.eclipse.emf.common:2.16.0.v20190625-1131'
    compile 'extra:org.eclipse.emf.ecore.xmi:2.16.0.v20190528-0725'
    compile 'extra:org.eclipse.emf.ecore:2.19.0.v20190822-1451'
    compile 'extra:org.eclipse.emf:2.8.0.v20180706-1146'
}

jar {
}

task slimJar(type: Jar) {
	classifier = 'slim'
	from {
		(configurations.slim - configurations.notIncludedSlim).collect({ it.isDirectory() ? it : zipTree(it) })
	}
	{
		exclude 'META-INF/MANIFEST.MF'
		exclude 'META-INF/*.SF'
		exclude 'META-INF/*.DSA'
		exclude 'META-INF/*.RSA'
	}
	with jar
}

task fatJar(type: Jar) {
	classifier = 'all'
	from {
		configurations.runtime.collect({ it.isDirectory() ? it : zipTree(it) })
	}
	{
		exclude 'META-INF/MANIFEST.MF'
		exclude 'META-INF/*.SF'
		exclude 'META-INF/*.DSA'
		exclude 'META-INF/*.RSA'
	}
	with jar
}